(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{102:function(e,n,t){"use strict";t.r(n);var r,a,c,o=t(1),i=t.n(o),s=t(33),u=t.n(s),b=(t(70),t(23)),l=t(15),j=t(3),d=t(4),O={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"]},p=t(13),g=t(0),f=d.b.div(r||(r=Object(j.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: ",";\n  /* flex\ub85c \ub0b4\ubd80 \ub0b4\uc6a9 \uc911\uc559 \uc815\ub82c */\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])),O.gray[2]),m=d.b.div(a||(a=Object(j.a)(["\n  .logo-area {\n    display: block;\n    padding-bottom: 2rem;\n    text-align: center;\n    font-weight: bold;\n    letter-spacing: 2px;\n  }\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.025);\n  padding: 2rem;\n  width: 360px;\n  background: white;\n  border-radius: 2px;\n"]))),h=function(e){var n=e.children;return Object(g.jsx)(f,{children:Object(g.jsxs)(m,{children:[Object(g.jsx)("div",{className:"logo-area",children:Object(g.jsx)(p.b,{to:"/",children:"REACTERS"})}),n]})})},x=t(16),v=t(11),y=t(8),w=t(5),E=t(12),k=t.n(E),C=t(104),S=t(103),T=t(59),I=t(14),P="loading/START_LOADING",R="loading/FINISH_LOADING",_=Object(C.a)(P,(function(e){return e})),L=Object(C.a)(R,(function(e){return e})),D=Object(S.a)((c={},Object(y.a)(c,P,(function(e,n){return Object(w.a)(Object(w.a)({},e),{},Object(y.a)({},n.payload,!0))})),Object(y.a)(c,R,(function(e,n){return Object(w.a)(Object(w.a)({},e),{},Object(y.a)({},n.payload,!1))})),c),{}),A=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function N(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return k.a.mark((function a(c){var o;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(I.c)(_(e));case 2:return a.prev=2,a.next=5,Object(I.b)(n,c.payload);case 5:return o=a.sent,a.next=8,Object(I.c)({type:t,payload:o.data,meta:o});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(I.c)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(I.c)(L(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var F,z=t(58),M=t.n(z).a.create(),B=function(){return M.post("/api/auth/logout")},G=k.a.mark(oe),U="auth/CHANGE_FIELD",H="auth/INITIALIZE_FORM",W=A("auth/REGISTER"),q=Object(x.a)(W,3),J=q[0],Q=q[1],Z=q[2],K=A("auth/LOGIN"),$=Object(x.a)(K,3),V=$[0],X=$[1],Y=$[2],ee=Object(C.a)(U,(function(e){return{form:e.form,key:e.key,value:e.value}})),ne=Object(C.a)(H,(function(e){return e})),te=Object(C.a)(J,(function(e){return{username:e.username,password:e.password}})),re=Object(C.a)(V,(function(e){return{username:e.username,password:e.password}})),ae=N(J,(function(e){var n=e.username,t=e.password;return M.post("/api/auth/register",{username:n,password:t})})),ce=N(V,(function(e){var n=e.username,t=e.password;return M.post("/api/auth/login",{username:n,password:t})}));function oe(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)(J,ae);case 2:return e.next=4,Object(I.d)(V,ce);case 4:case"end":return e.stop()}}),G)}var ie,se,ue,be,le,je,de,Oe,pe,ge,fe,me={register:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""},auth:null,authError:null},he=Object(S.a)((F={},Object(y.a)(F,U,(function(e,n){var t=n.payload,r=t.form,a=t.key,c=t.value;return Object(T.a)(e,(function(e){e[r][a]=c}))})),Object(y.a)(F,H,(function(e,n){var t,r=n.payload;return Object(w.a)(Object(w.a)({},e),{},(t={},Object(y.a)(t,r,me[r]),Object(y.a)(t,"authError",null),t))})),Object(y.a)(F,Q,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{authError:null,auth:t})})),Object(y.a)(F,Z,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{authError:t})})),Object(y.a)(F,X,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{authError:null,auth:t})})),Object(y.a)(F,Y,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{authError:t})})),F),me),xe=Object(d.a)(ie||(ie=Object(j.a)(["\n  border: none;\n  border-radius: 4px;\n  font-size: 1rem;\n  font-weight: bold;\n  padding: 0.25rem 1rem;\n  color: white;\n  outline: none;\n  cursor: pointer;\n  background: ",";\n  &:hover {\n    background: ",";\n  }\n  ","\n  ","\n\n    &:disabled {\n    background: ",";\n    color: ",";\n    cursor: not-allowed;\n  }\n"])),O.gray[8],O.gray[6],(function(e){return e.fullWidth&&Object(d.a)(se||(se=Object(j.a)(["\n      padding-top: 0.75rem;\n      padding-bottom: 0.75rem;\n      width: 100%;\n      font-size: 1.125rem;\n    "])))}),(function(e){return e.cyan&&Object(d.a)(ue||(ue=Object(j.a)(["\n      background: ",";\n      &:hover {\n        background: ",";\n      }\n    "])),O.cyan[5],O.cyan[4])}),O.gray[3],O.gray[5]),ve=d.b.button(be||(be=Object(j.a)(["\n  ","\n"])),xe),ye=Object(d.b)(p.b)(le||(le=Object(j.a)(["\n  ","\n"])),xe),we=function(e){return console.log(e),e.to?Object(g.jsx)(ye,Object(w.a)(Object(w.a)({},e),{},{cyan:e.cyan?1:0})):Object(g.jsx)(ve,Object(w.a)({},e))},Ee=d.b.div(je||(je=Object(j.a)(["\n  h3 {\n    margin: 0;\n    color: ",";\n    margin-bottom: 1rem;\n  }\n"])),O.gray[8]),ke=d.b.input(de||(de=Object(j.a)(["\n  font-size: 1rem;\n  border: none;\n  border-bottom: 1px solid ",";\n  padding-bottom: 0.5rem;\n  outline: none;\n  width: 100%;\n  &:focus {\n    color: $oc-teal-7;\n    border-bottom: 1px solid ",";\n  }\n  & + & {\n    margin-top: 1rem;\n  }\n"])),O.gray[5],O.gray[7]),Ce=d.b.div(Oe||(Oe=Object(j.a)(["\n  margin-top: 2rem;\n  text-align: right;\n  a {\n    color: ",";\n    text-decoration: underline;\n    &:hover {\n      color: ",";\n    }\n  }\n"])),O.gray[6],O.gray[9]),Se=Object(d.b)(we)(pe||(pe=Object(j.a)(["\n  margin-top: 1rem;\n"]))),Te={login:"\ub85c\uadf8\uc778",register:"\ud68c\uc6d0\uac00\uc785"},Ie=d.b.div(ge||(ge=Object(j.a)(["\n  color: red;\n  text-align: center;\n  font-size: 0.875rem;\n  margin-top: 1rem;\n"]))),Pe=function(e){var n=e.type,t=e.form,r=e.onChange,a=e.onSubmit,c=e.error,o=Te[n];return Object(g.jsxs)(Ee,{children:[Object(g.jsx)("h3",{children:o}),Object(g.jsxs)("form",{onSubmit:a,children:[Object(g.jsx)(ke,{autoComplete:"username",name:"username",placeholder:"\uc544\uc774\ub514",onChange:r,value:t.username}),Object(g.jsx)(ke,{autoComplete:"new-password",name:"password",placeholder:"\ube44\ubc00\ubc88\ud638",type:"password",onChange:r,value:t.password}),"register"===n&&Object(g.jsx)(ke,{autoComplete:"new-password",name:"passwordConfirm",placeholder:"\ube44\ubc00\ubc88\ud638 \ud655\uc778",type:"password",onChange:r,value:t.passwordConfirm}),c&&Object(g.jsx)(Ie,{children:c}),Object(g.jsx)(Se,{cyan:!0,fullWidth:!0,style:{marginTop:"1rem"},children:o})]}),Object(g.jsx)(Ce,{children:"login"===n?Object(g.jsx)(p.b,{to:"/register",children:"\ud68c\uc6d0\uac00\uc785"}):Object(g.jsx)(p.b,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})},Re=k.a.mark(qe),_e=k.a.mark(Je),Le="user/TEMP_SET_USER",De=A("user/CHECK"),Ae=Object(x.a)(De,3),Ne=Ae[0],Fe=Ae[1],ze=Ae[2],Me="user/LOGOUT",Be=Object(C.a)(Le,(function(e){return e})),Ge=Object(C.a)(Ne),Ue=Object(C.a)(Me),He=N(Ne,(function(){return M.get("/api/auth/check")}));function We(){try{localStorage.removeItem("user")}catch(e){console.log("localStorage removeItem")}}function qe(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(I.b)(B);case 3:localStorage.removeItem("user"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),Re,null,[[0,6]])}function Je(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)(Ne,He);case 2:return e.next=4,Object(I.d)(ze,We);case 4:return e.next=6,Object(I.d)(Me,qe);case 6:case"end":return e.stop()}}),_e)}var Qe,Ze,Ke,$e,Ve,Xe,Ye,en,nn,tn,rn,an,cn,on,sn=Object(S.a)((fe={},Object(y.a)(fe,Le,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{user:t})})),Object(y.a)(fe,Fe,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{user:t,checkError:null})})),Object(y.a)(fe,ze,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{user:null,checkError:t})})),Object(y.a)(fe,Me,(function(e){return Object(w.a)(Object(w.a)({},e),{},{user:null})})),fe),{user:null,checkError:null}),un=Object(l.e)((function(e){var n=e.history,t=Object(o.useState)(null),r=Object(x.a)(t,2),a=r[0],c=r[1],i=Object(v.b)(),s=Object(v.c)((function(e){var n=e.auth,t=e.user;return{form:n.login,auth:n.auth,authError:n.authError,user:t.user}})),u=s.form,b=s.auth,l=s.authError,j=s.user;return Object(o.useEffect)((function(){i(ne("login"))}),[i]),Object(o.useEffect)((function(){if(l)return console.log("\uc624\ub958 \ubc1c\uc0dd"),console.log(l),void c("\ub85c\uadf8\uc778 \uc2e4\ud328");b&&(console.log("\ub85c\uadf8\uc778 \uc131\uacf5"),i(Ge()))}),[b,l,i]),Object(o.useEffect)((function(){if(j){n.push("/");try{localStorage.setItem("user",JSON.stringify(j))}catch(e){console.log("localStorage is not working")}}}),[n,j]),Object(g.jsx)(Pe,{type:"login",form:u,onChange:function(e){var n=e.target,t=n.value,r=n.name;i(ee({form:"login",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=u.username,t=u.password;i(re({username:n,password:t}))},error:a})})),bn=function(){return Object(g.jsx)(h,{children:Object(g.jsx)(un,{})})},ln=t(65),jn=d.b.div(Qe||(Qe=Object(j.a)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  width: 1024px;\n  margin: 0 auto; /* \uc911\uc559 \uc815\ub82c */\n  /* \ube0c\ub77c\uc6b0\uc800 \ud06c\uae30\uc5d0 \ub530\ub77c \uac00\ub85c \uc0ac\uc774\uc988 \ubcc0\uacbd */\n  @media (max-width: 1024px) {\n    width: 768px;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]))),dn=function(e){var n=e.children,t=Object(ln.a)(e,["children"]);return Object(g.jsx)(jn,Object(w.a)(Object(w.a)({},t),{},{children:n}))},On=d.b.div(Ze||(Ze=Object(j.a)(["\n  position: fixed;\n  width: 100%;\n  background: white;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.08);\n"]))),pn=Object(d.b)(dn)(Ke||(Ke=Object(j.a)(["\n  height: 4rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between; /* \uc790\uc2dd \uc5d8\ub9ac\uba3c\ud2b8 \uc0ac\uc774\uc5d0 \uc5ec\ubc31\uc744 \ucd5c\ub300\ub85c \uc124\uc815 */\n  .logo {\n    font-size: 1.125rem;\n    font-weight: 800;\n    letter-spacing: 2px;\n  }\n  .right {\n    display: flex;\n    align-items: center;\n  }\n"]))),gn=d.b.div($e||($e=Object(j.a)(["\n  height: 4rem;\n"]))),fn=d.b.div(Ve||(Ve=Object(j.a)(["\n  font-weight: 800;\n  margin-right: 1rem;\n"]))),mn=function(e){var n=e.user,t=e.onLogout;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(On,{children:Object(g.jsxs)(pn,{children:[Object(g.jsx)(p.b,{to:"/",className:"logo",children:"REACTERS"}),n?Object(g.jsxs)("div",{className:"right",children:[Object(g.jsx)(fn,{children:n.username}),Object(g.jsx)(we,{onClick:t,children:"\ub85c\uadf8\uc544\uc6c3"})]}):Object(g.jsx)("div",{className:"right",children:Object(g.jsx)(we,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})}),Object(g.jsx)(gn,{})]})},hn=function(){var e=Object(v.c)((function(e){return{user:e.user.user}})).user,n=Object(v.b)();return Object(g.jsx)(mn,{user:e,onLogout:function(){n(Ue())}})},xn=t(25),vn=t.n(xn),yn=d.b.div(Xe||(Xe=Object(j.a)(["\n  width: 320px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 3rem;\n  padding-bottom: 5rem;\n"]))),wn=d.b.div(Ye||(Ye=Object(j.a)([""]))),En=function(e){var n=e.username,t=e.tag,r=e.page,a=vn.a.stringify({tag:t,page:r});return n?"/@".concat(n,"?").concat(a):"/?".concat(a)},kn=function(e){var n=e.page,t=e.lastPage,r=e.tag,a=e.username;return Object(g.jsxs)(yn,{children:[Object(g.jsx)(we,{disabled:1===n,to:1===n?void 0:En({username:a,tag:r,page:n-1}),children:"\uc774\uc804"}),Object(g.jsx)(wn,{children:n}),Object(g.jsx)(we,{disabled:n===t,to:n===t?void 0:En({username:a,tag:r,page:n+1}),children:"\ub2e4\uc74c"})]})},Cn=Object(l.e)((function(e){var n=e.location,t=e.match,r=Object(v.c)((function(e){var n=e.posts,t=e.loading;return{lastPage:n.lastPage,posts:n.posts,loading:t["post/LIST_POSTS"]}})),a=r.lastPage,c=r.posts,o=r.loading;if(!c||o)return null;var i=t.params.username,s=vn.a.parse(n.search,{ignoreQueryPrefix:!0}),u=s.tag,b=s.page,l=void 0===b?1:b;return Object(g.jsx)(kn,{tag:u,username:i,page:parseInt(l,10),lastPage:a})})),Sn=d.b.div(en||(en=Object(j.a)(["\n  ","\n  color: ",";\n\n  /* span \uc0ac\uc774\uc5d0 \uac00\uc6b4\ub383\uc810 \ubb38\uc790 \ubcf4\uc5ec \uc8fc\uae30 */\n  span + span:before {\n    color: ",";\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    content: '\\B7'; /* \uac00\uc6b4\ub383\uc810 \ubb38\uc790 */\n  }\n"],["\n  ","\n  color: ",";\n\n  /* span \uc0ac\uc774\uc5d0 \uac00\uc6b4\ub383\uc810 \ubb38\uc790 \ubcf4\uc5ec \uc8fc\uae30 */\n  span + span:before {\n    color: ",";\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    content: '\\\\B7'; /* \uac00\uc6b4\ub383\uc810 \ubb38\uc790 */\n  }\n"])),(function(e){return e.hasMarginTop&&Object(d.a)(nn||(nn=Object(j.a)(["\n      margin-top: 1rem;\n    "])))}),O.gray[6],O.gray[4]),Tn=function(e){var n=e.username,t=e.publishedDate,r=e.hasMarginTop;return Object(g.jsxs)(Sn,{hasMarginTop:r,children:[Object(g.jsx)("span",{children:Object(g.jsx)("b",{children:Object(g.jsx)(p.b,{to:"/@".concat(n),children:n})})}),Object(g.jsx)("span",{children:new Date(t).toLocaleDateString()})]})},In=d.b.div(tn||(tn=Object(j.a)(["\n  margin-top: 0.5rem;\n  .tag {\n    display: inline-block;\n    color: ",";\n    text-decoration: none;\n    margin-right: 0.5rem;\n    &:hover {\n      color: ",";\n    }\n  }\n"])),O.gray[7],O.gray[6]),Pn=function(e){var n=e.tags;return Object(g.jsx)(In,{children:n.map((function(e){return Object(g.jsxs)(p.b,{className:"tag",to:"/?tag=".concat(e),children:["#",e]},e)}))})},Rn=Object(d.b)(dn)(rn||(rn=Object(j.a)(["\n  margin-top: 3rem;\n"]))),_n=d.b.div(an||(an=Object(j.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 3rem;\n"]))),Ln=d.b.div(cn||(cn=Object(j.a)(["\n  padding-top: 3rem;\n  padding-bottom: 3rem;\n  /* \ub9e8 \uc704 \ud3ec\uc2a4\ud2b8\ub294 padding-top \uc5c6\ub4ec*/\n\n  &:first-child {\n    padding-top: 0;\n  }\n  & + & {\n    border-top: 1px solid ",";\n  }\n  h2 {\n    font-size: 2rem;\n    margin-bottom: 0;\n    &:hover {\n      color: ",";\n    }\n  }\n  p {\n    margin-top: 2rem;\n  }\n"])),O.gray[2],O.gray[6]),Dn=function(e){var n=e.post,t=n.publishedDate,r=n.user,a=n.tags,c=n.title,o=n.body,i=n._id;return Object(g.jsxs)(Ln,{children:[Object(g.jsx)("h2",{children:Object(g.jsx)(p.b,{to:"/@".concat(r.username,"/").concat(i),children:c})}),Object(g.jsx)(Tn,{username:r.username,publishedDate:new Date(t)}),Object(g.jsx)(Pn,{tags:a}),Object(g.jsx)("p",{children:o})]})},An=function(e){var n=e.posts,t=e.loading,r=e.error,a=e.showWriteButton;return r?Object(g.jsx)(Rn,{children:"\uc5d0\ub7ec \ubc1c\uc0dd"}):Object(g.jsxs)(Rn,{children:[Object(g.jsx)(_n,{children:a&&Object(g.jsx)(we,{cyan:!0,to:"/write",children:"\uc0c8 \uae00 \uc791\uc131\ud558\uae30"})}),!t&&n&&Object(g.jsx)("div",{children:n.map((function(e){return Object(g.jsx)(Dn,{post:e},e._id)}))})]})},Nn=k.a.mark(Wn),Fn=A("posts/LIST_POSTS"),zn=Object(x.a)(Fn,3),Mn=zn[0],Bn=zn[1],Gn=zn[2],Un=Object(C.a)(Mn,(function(e){return{tag:e.tag,username:e.username,page:e.page}})),Hn=N(Mn,(function(e){var n=e.page,t=e.username,r=e.tag,a=vn.a.stringify({page:n,username:t,tag:r});return M.get("/api/posts?".concat(a))}));function Wn(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)(Mn,Hn);case 2:case"end":return e.stop()}}),Nn)}var qn,Jn=Object(S.a)((on={},Object(y.a)(on,Bn,(function(e,n){var t=n.payload,r=n.meta;return Object(w.a)(Object(w.a)({},e),{},{posts:t,lastPage:parseInt(r.headers["last-page"],10)})})),Object(y.a)(on,Gn,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{error:t})})),on),{posts:null,error:null,lastPage:1}),Qn=Object(l.e)((function(e){var n=e.location,t=e.match,r=Object(v.b)(),a=Object(v.c)((function(e){var n=e.posts,t=e.loading,r=e.user;return{posts:n.posts,error:n.error,loading:t["post/LIST_POSTS"],user:r.user}})),c=a.posts,i=a.error,s=a.loading,u=a.user;return Object(o.useEffect)((function(){var e=t.params.username,a=vn.a.parse(n.search,{ignoreQueryPrefix:!0}),c=a.tag,o=a.page;r(Un({tag:c,username:e,page:o}))}),[r,n.search,t.params]),Object(g.jsx)(An,{loading:s,error:i,posts:c,showWriteButton:u})})),Zn=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(hn,{}),Object(g.jsx)(Qn,{}),Object(g.jsx)(Cn,{})]})},Kn=t(60),$n=k.a.mark(ot),Vn=A("post/READ_POST"),Xn=Object(x.a)(Vn,3),Yn=Xn[0],et=Xn[1],nt=Xn[2],tt="post/UNLOAD_POST",rt=Object(C.a)(Yn,(function(e){return e})),at=Object(C.a)(tt),ct=N(Yn,(function(e){return M.get("/api/posts/".concat(e))}));function ot(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)(Yn,ct);case 2:case"end":return e.stop()}}),$n)}var it,st,ut,bt,lt,jt,dt,Ot,pt,gt={post:null,error:null},ft=Object(S.a)((qn={},Object(y.a)(qn,et,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{post:t})})),Object(y.a)(qn,nt,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{error:t})})),Object(y.a)(qn,tt,(function(){return gt})),qn),gt),mt=Object(d.b)(dn)(it||(it=Object(j.a)(["\n  margin-top: 4rem;\n"]))),ht=d.b.div(st||(st=Object(j.a)(["\n  border-bottom: 1px solid ",";\n  padding-bottom: 3rem;\n  margin-bottom: 3rem;\n  h1 {\n    font-size: 3rem;\n    line-height: 1.5;\n    margin: 0;\n  }\n"])),O.gray[2]),xt=d.b.div(ut||(ut=Object(j.a)(["\n  font-size: 1.3125rem;\n  color: ",";\n"])),O.gray[8]),vt=function(e){var n=e.post,t=e.error,r=e.loading,a=e.actionButtons;if(t)return t.response&&404===t.response.status?Object(g.jsx)(mt,{children:"\uc874\uc7ac \ud558\uc9c0 \uc54a\ub294 \ud3ec\uc2a4\ud2b8\uc785\ub2c8\ub2e4."}):Object(g.jsx)(mt,{children:"\uc624\ub958 \ubc1c\uc0dd"});if(r||!n)return null;var c=n.title,o=n.body,i=n.user,s=n.publishedDate,u=n.tags;return Object(g.jsxs)(mt,{children:[Object(g.jsxs)(ht,{children:[Object(g.jsx)(b.a,{children:Object(g.jsxs)("title",{children:[c," - REACTERS"]})}),Object(g.jsx)("h1",{children:c}),Object(g.jsx)(Tn,{username:i.username,publishedDate:s,hasMarginTop:!0}),Object(g.jsx)(Pn,{tags:u})]}),a,Object(g.jsx)(xt,{dangerouslySetInnerHTML:{__html:o}})]})},yt=d.b.div(bt||(bt=Object(j.a)(["\n  position: fixed;\n  z-index: 30;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.25);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),wt=d.b.div(lt||(lt=Object(j.a)(["\n  width: 320px;\n  background: white;\n  padding: 1.5rem;\n  border-radius: 4px;\n  box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.125);\n  h2 {\n    margin-top: 0;\n    margin-bottom: 1rem;\n  }\n  p {\n    margin-bottom: 3rem;\n  }\n  .buttons {\n    display: flex;\n    justify-content: flex-end;\n  }\n"]))),Et=Object(d.b)(we)(jt||(jt=Object(j.a)(["\n  height: 2rem;\n  & + & {\n    margin-left: 0.75rem;\n  }\n"]))),kt=function(e){var n=e.visible,t=e.title,r=e.description,a=e.confirmText,c=void 0===a?"\ud655\uc778":a,o=e.cancelText,i=void 0===o?"\ucde8\uc18c":o,s=e.onConfirm,u=e.onCancel;return n?Object(g.jsx)(yt,{children:Object(g.jsxs)(wt,{children:[Object(g.jsx)("h2",{children:t}),Object(g.jsx)("p",{children:r}),Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)(Et,{onClick:u,children:i}),Object(g.jsx)(Et,{cyan:!0,onClick:s,children:c})]})]})}):null},Ct=function(e){var n=e.visible,t=e.onConfirm,r=e.onCancel;return Object(g.jsx)(kt,{visible:n,title:"\ud3ec\uc2a4\ud2b8 \uc0ad\uc81c",description:"\ud3ec\uc2a4\ud2b8\ub97c \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmText:"\uc0ad\uc81c",onConfirm:t,onCancel:r})},St=d.b.div(dt||(dt=Object(j.a)(["\n  display: fex;\n  justify-content: flex-end;\n  margin-bottom: 2rem;\n  margin-top: -1.5rem;\n"]))),Tt=d.b.button(Ot||(Ot=Object(j.a)(["\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n    color: ",";\n    font-weight: bold;\n    border: none;\n    outline: none;\n    font-size: 0.875rem;\n    cursor: pointer;\n    &:hover {\n        background: ","\n        color: ",";\n    }\n    & + & {\n        margin-left: 0.25rem;\n    }\n"])),O.gray[6],O.gray[1],O.gray[7]),It=function(e){var n=e.onEdit,t=e.onRemove,r=Object(o.useState)(!1),a=Object(x.a)(r,2),c=a[0],i=a[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(St,{children:[Object(g.jsx)(Tt,{onClick:n,children:"\uc218\uc815"}),Object(g.jsx)(Tt,{onClick:function(){i(!0)},children:"\uc0ad\uc81c"})]}),Object(g.jsx)(Ct,{visible:c,onConfirm:function(){i(!1),t()},onCancel:function(){i(!1)}})]})},Pt=k.a.mark(Vt),Rt="write/INITIALIZE",_t="write/CHANGE_FIELD",Lt=A("write/WRITE_POST"),Dt=Object(x.a)(Lt,3),At=Dt[0],Nt=Dt[1],Ft=Dt[2],zt="write/SET_ORIGINAL_POST",Mt=A("write/UPDATE_POST"),Bt=Object(x.a)(Mt,3),Gt=Bt[0],Ut=Bt[1],Ht=Bt[2],Wt=Object(C.a)(Rt),qt=Object(C.a)(_t,(function(e){return{key:e.key,value:e.value}})),Jt=Object(C.a)(At,(function(e){return{title:e.title,body:e.body,tags:e.tags}})),Qt=Object(C.a)(zt,(function(e){return e})),Zt=Object(C.a)(Gt,(function(e){return{id:e.id,title:e.title,body:e.body,tags:e.tags}})),Kt=N(At,(function(e){var n=e.title,t=e.body,r=e.tags;return M.post("/api/posts",{title:n,body:t,tags:r})})),$t=N(Gt,(function(e){var n=e.id,t=e.title,r=e.body,a=e.tags;return M.patch("/api/posts/".concat(n),{title:t,body:r,tags:a})}));function Vt(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)(At,Kt);case 2:return e.next=4,Object(I.d)(Gt,$t);case 4:case"end":return e.stop()}}),Pt)}var Xt,Yt,er,nr,tr,rr,ar,cr,or,ir={title:"",body:"",tags:[],post:null,postError:null,originalPostId:null},sr=Object(S.a)((pt={},Object(y.a)(pt,Rt,(function(e){return ir})),Object(y.a)(pt,_t,(function(e,n){var t=n.payload,r=t.key,a=t.value;return Object(w.a)(Object(w.a)({},e),{},Object(y.a)({},r,a))})),Object(y.a)(pt,At,(function(e){return Object(w.a)(Object(w.a)({},e),{},{post:null,postError:null})})),Object(y.a)(pt,Nt,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{post:t})})),Object(y.a)(pt,Ft,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{postError:t})})),Object(y.a)(pt,zt,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{title:t.title,body:t.body,tags:t.tags,originalPostId:t._id})})),Object(y.a)(pt,Ut,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{post:t})})),Object(y.a)(pt,Ht,(function(e,n){var t=n.payload;return Object(w.a)(Object(w.a)({},e),{},{postError:t})})),pt),ir),ur=Object(l.e)((function(e){var n=e.match,t=e.history,r=n.params.postId,a=Object(v.b)(),c=Object(v.c)((function(e){var n=e.post,t=e.loading,r=e.user;return{post:n.post,error:n.error,loading:t["post/READ_POST"],user:r.user}})),i=c.post,s=c.error,u=c.loading,b=c.user;Object(o.useEffect)((function(){return a(rt(r)),function(){a(at())}}),[a,r]);var l=function(){var e=Object(Kn.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=r,M.delete("/api/posts/".concat(n));case 3:t.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),j=(b&&b._id)===(i&&i.user._id);return Object(g.jsx)(vt,{post:i,loading:u,error:s,actionButtons:j&&Object(g.jsx)(It,{onEdit:function(){a(Qt(i)),t.push("/write")},onRemove:l})})})),br=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(hn,{}),Object(g.jsx)(ur,{})]})},lr=Object(l.e)((function(e){var n=e.history,t=Object(o.useState)(null),r=Object(x.a)(t,2),a=r[0],c=r[1],i=Object(v.b)(),s=Object(v.c)((function(e){var n=e.auth,t=e.user;return{form:n.register,auth:n.auth,authError:n.authError,user:t.user}})),u=s.form,b=s.auth,l=s.authError,j=s.user;return Object(o.useEffect)((function(){i(ne("register"))}),[i]),Object(o.useEffect)((function(){if(l)return 409===l.response.status?void c("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uacc4\uc815\uba85\uc785\ub2c8\ub2e4."):void c("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328");b&&(console.log("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5"),console.log(b),i(Ge()))}),[b,l,i]),Object(o.useEffect)((function(){if(j){console.log("check API \uc131\uacf5"),console.log(j),n.push("/");try{localStorage.setItem("user",JSON.stringify(j))}catch(e){console.log("localStorage is not working")}}}),[n,j]),Object(g.jsx)(Pe,{type:"register",form:u,onChange:function(e){var n=e.target,t=n.value,r=n.name;i(ee({form:"register",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=u.username,t=u.password,r=u.passwordConfirm;if(![n,t,r].includes(""))return t!==r?(c("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),i(ee({form:"register",key:"password",value:""})),void i(ee({form:"register",key:"passwordConfirm",value:""}))):void i(te({username:n,password:t}));c("\ube48 \uce78\uc744 \ubaa8\ub450 \uc785\ub825\ud558\uc138\uc694.")},error:a})})),jr=function(){return Object(g.jsx)(h,{children:Object(g.jsx)(lr,{})})},dr=t(61),Or=t.n(dr),pr=(t(101),Object(d.b)(dn)(Xt||(Xt=Object(j.a)(["\n  /* \ud398\uc774\uc9c0 \uc704 \uc544\ub798 \uc5ec\ubc31 \uc9c0\uc815 */\n  padding-top: 5rem;\n  padding-bottom: 5rem;\n"])))),gr=d.b.input(Yt||(Yt=Object(j.a)(["\n  font-size: 3rem;\n  outline: none;\n  padding-bottom: 0.5rem;\n  border: none;\n  border-bottom: 1px solid ",";\n  margin-bottom: 2rem;\n  width: 100%;\n"])),O.gray[4]),fr=d.b.div(er||(er=Object(j.a)(["\n  /*\ucd5c\uc18c \ud06c\uae30 \uc9c0\uc815 \ubc11 padding \uc81c\uac70 */\n  .ql-editor {\n    padding: 0;\n    min-height: 320px;\n    font-size: 1.125rem;\n    line-height: 1.5;\n  }\n  .ql-editor.ql-blank::before {\n    left: 0px;\n  }\n"]))),mr=function(e){var n=e.title,t=e.body,r=e.onChangeField,a=Object(o.useRef)(null),c=Object(o.useRef)(null);Object(o.useEffect)((function(){c.current=new Or.a(a.current,{theme:"bubble",placeholder:"\ub0b4\uc6a9\uc744 \uc791\uc131\ud558\uc138\uc694...",modules:{toolbar:[[{header:"1"},{header:"2"}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block","link","image"]]}});var e=c.current;e.on("text-change",(function(n,t,a){"user"===a&&r({key:"body",value:e.root.innerHTML})}))}),[r]);var i=Object(o.useRef)(!1);Object(o.useEffect)((function(){i.current||(i.current=!0,c.current.root.innerHTML=t)}),[t]);return Object(g.jsxs)(pr,{children:[Object(g.jsx)(gr,{placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",onChange:function(e){r({key:"title",value:e.target.value})},value:n}),Object(g.jsx)(fr,{children:Object(g.jsx)("div",{ref:a})})]})},hr=function(){var e=Object(v.b)(),n=Object(v.c)((function(e){var n=e.write;return{title:n.title,body:n.body}})),t=n.title,r=n.body,a=Object(o.useCallback)((function(n){return e(qt(n))}),[e]);return Object(o.useEffect)((function(){return function(){e(Wt())}}),[e]),Object(g.jsx)(mr,{onChangeField:a,title:t,body:r})},xr=t(64),vr=d.b.div(nr||(nr=Object(j.a)(["\n  width: 100%;\n  border-top: 1px solid ",";\n  padding-top: 2rem;\n\n  h4 {\n    color: ",";\n    margin-top: 0;\n    margin-bottom: 0.5rem;\n  }\n"])),O.gray[2],O.gray[8]),yr=d.b.form(tr||(tr=Object(j.a)(["\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  width: 256px;\n  border: 1px solid ","; /* \uc2a4\ud0c0\uc77c \ucd08\uae30\ud654 */\n  input,\n  button {\n    outline: none;\n    border: none;\n    font-size: 1rem;\n  }\n\n  input {\n    padding: 0.5rem;\n    flex: 1;\n    min-width: 0;\n  }\n  button {\n    cursor: pointer;\n    padding-right: 1rem;\n    padding-left: 1rem;\n    border: none;\n    background: ",";\n    color: white;\n    font-weight: bold;\n    &:hover {\n      background: ",";\n    }\n  }\n"])),O.gray[9],O.gray[8],O.gray[6]),wr=d.b.div(rr||(rr=Object(j.a)(["\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    opacity: 0.5;\n  }\n"])),O.gray[6]),Er=d.b.div(ar||(ar=Object(j.a)(["\n  display: flex;\n  margin-top: 0.5rem;\n"]))),kr=i.a.memo((function(e){var n=e.tag,t=e.onRemove;return Object(g.jsxs)(wr,{onClick:function(){return t(n)},children:["#",n]})})),Cr=i.a.memo((function(e){var n=e.tags,t=e.onRemove;return Object(g.jsx)(Er,{children:n.map((function(e){return Object(g.jsx)(kr,{tag:e,onRemove:t},e)}))})})),Sr=function(e){var n=e.onChangeTags,t=e.tags,r=Object(o.useState)(""),a=Object(x.a)(r,2),c=a[0],i=a[1],s=Object(o.useState)([]),u=Object(x.a)(s,2),b=u[0],l=u[1],j=Object(o.useCallback)((function(e){if(e&&!b.includes(e)){var t=[].concat(Object(xr.a)(b),[e]);l(t),n(t)}}),[b,n]),d=Object(o.useCallback)((function(e){var t=b.filter((function(n){return n!==e}));l(t),n(t)}),[b,n]),O=Object(o.useCallback)((function(e){i(e.target.value)}),[]),p=Object(o.useCallback)((function(e){e.preventDefault(),j(c.trim()),i("")}),[c,j]);return Object(o.useEffect)((function(){l(t)}),[t]),Object(g.jsxs)(vr,{children:[Object(g.jsx)("h4",{children:"\ud0dc\uadf8"}),Object(g.jsxs)(yr,{onSubmit:p,children:[Object(g.jsx)("input",{placeholder:"\ud0dc\uadf8\ub97c \uc785\ub825\ud558\uc138\uc694",value:c,onChange:O}),Object(g.jsx)("button",{type:"submit",children:"\ucd94\uac00"})]}),Object(g.jsx)(Cr,{tags:b,onRemove:d})]})},Tr=function(){var e=Object(v.b)(),n=Object(v.c)((function(e){return e.write.tags}));return Object(g.jsx)(Sr,{onChangeTags:function(n){e(qt({key:"tags",value:n}))},tags:n})},Ir=d.b.div(cr||(cr=Object(j.a)(["\n  margin-top: 1rem;\n  margin-bottom: 3rem;\n  button + button {\n    margin-left: 0.5rem;\n  }\n"]))),Pr=Object(d.b)(we)(or||(or=Object(j.a)(["\n  height: 2.125rem;\n  & + & {\n    margin-left: 0.5rem;\n  }\n"]))),Rr=function(e){var n=e.onPublish,t=e.onCancel,r=e.isEdit;return Object(g.jsxs)(Ir,{children:[Object(g.jsxs)(Pr,{cyan:!0,onClick:n,children:["\ud3ec\uc2a4\ud2b8 ",r?"\uc218\uc815":"\ub4f1\ub85d"]}),Object(g.jsx)(Pr,{onClick:t,children:"\ucde8\uc18c"})]})},_r=Object(l.e)((function(e){var n=e.history,t=Object(v.b)(),r=Object(v.c)((function(e){var n=e.write;return{title:n.title,body:n.body,tags:n.tags,post:n.post,postError:n.postError,originalPostId:n.originalPostId}})),a=r.title,c=r.body,i=r.tags,s=r.post,u=r.postError,b=r.originalPostId;return Object(o.useEffect)((function(){if(s){var e=s._id,t=s.user;n.push("/@".concat(t.username,"/").concat(e))}u&&console.log(u)}),[n,s,u]),Object(g.jsx)(Rr,{onPublish:function(){t(b?Zt({title:a,body:c,tags:i,id:b}):Jt({title:a,body:c,tags:i}))},onCancel:function(){n.goback()},isEdit:!!b})})),Lr=function(){return Object(g.jsxs)(dn,{children:[Object(g.jsx)(b.a,{children:Object(g.jsx)("title",{children:"\uae00 \uc791\uc131\ud558\uae30 - REACTERS"})}),Object(g.jsx)(hr,{}),Object(g.jsx)(Tr,{}),Object(g.jsx)(_r,{})]})},Dr=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b.a,{children:Object(g.jsx)("title",{children:"REACT"})}),Object(g.jsx)(l.a,{component:Zn,path:["/@:username","/"],exact:!0}),Object(g.jsx)(l.a,{component:bn,path:"/login"}),Object(g.jsx)(l.a,{component:jr,path:"/register"}),Object(g.jsx)(l.a,{component:Lr,path:"/write"}),Object(g.jsx)(l.a,{component:br,path:"/@:username/:postId"})]})},Ar=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,105)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))},Nr=t(24),Fr=t(62),zr=k.a.mark(Mr);function Mr(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([oe(),Je(),Vt(),ot(),Wn()]);case 2:case"end":return e.stop()}}),zr)}var Br=Object(Nr.combineReducers)({auth:he,loading:D,user:sn,write:sr,post:ft,posts:Jn}),Gr=t(63),Ur=Object(Gr.a)(),Hr=Object(Nr.createStore)(Br,Object(Fr.composeWithDevTools)(Object(Nr.applyMiddleware)(Ur)));Ur.run(Mr),function(){try{var e=localStorage.getItem("user");if(!e)return;Hr.dispatch(Be(e)),Hr.dispatch(Ge())}catch(n){console.log(n)}}(),u.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(v.a,{store:Hr,children:Object(g.jsx)(p.a,{children:Object(g.jsx)(b.b,{children:Object(g.jsx)(Dr,{})})})})}),document.getElementById("root")),Ar()},70:function(e,n,t){}},[[102,1,2]]]);
//# sourceMappingURL=main.82de536e.chunk.js.map